/*
 * Suite SEO — Design System
 * CSS propio, sin dependencias externas más allá de Bootstrap 5 + Feather Icons
 */

/* ═══════════════════════════════════════════════
   CSS CUSTOM PROPERTIES (light + dark)
═══════════════════════════════════════════════ */
:root {
  --primary:        #0f5274;
  --primary-light:  rgba(15, 82, 116, 0.10);
  --primary-hover:  rgba(15, 82, 116, 0.16);
  --nav-w:          280px;
  --nav-mini-w:     72px;
  --header-h:       62px;

  /* surfaces */
  --bg-body:        #f0f2f8;
  --bg-sidebar:     #ffffff;
  --bg-header:      #ffffff;
  --bg-card:        #ffffff;

  /* text */
  --text-main:      #283c50;
  --text-muted:     #64748b;
  --text-nav:       #64748b;
  --text-nav-label: #94a3b8;

  /* borders */
  --border:         #e5e7eb;
  --border-light:   #f1f3f7;

  /* shadows */
  --shadow-card: 0 1px 3px 0 rgb(0 0 0/.10), 0 1px 2px -1px rgb(0 0 0/.10);
  --shadow-header: 0 1px 4px 0 rgb(0 0 0/.08);
}

html[data-theme="dark"] {
  --primary:        #ffffff;
  --primary-light:  rgba(255, 255, 255, 0.08);
  --primary-hover:  rgba(255, 255, 255, 0.14);
  --bg-body:        #0b1120;
  --bg-sidebar:     #0f172a;
  --bg-header:      #0f172a;
  --bg-card:        #162032;
  --text-main:      #e2e8f0;
  --text-muted:     #94a3b8;
  --text-nav:       #8892a4;
  --text-nav-label: #3d4f65;
  --border:         #1e2d42;
  --border-light:   #1a2539;
  --shadow-card: 0 1px 3px 0 rgb(0 0 0/.30);
  --shadow-header: 0 1px 4px 0 rgb(0 0 0/.30);
}

/* ═══════════════════════════════════════════════
   BASE
═══════════════════════════════════════════════ */
*, *::before, *::after { box-sizing: border-box; }

body {
  margin: 0;
  font-family: "Inter", system-ui, sans-serif;
  font-size: 0.84rem;
  line-height: 1.6;
  color: var(--text-main);
  background: var(--bg-body);
  overflow-x: hidden;
  -webkit-font-smoothing: antialiased;
  transition: background .25s, color .25s;
}

a { color: var(--text-main); text-decoration: none; transition: color .2s; }
a:hover { color: var(--primary); }
h1,h2,h3,h4,h5,h6 { color: var(--text-main); font-weight: 700; margin-bottom: .5rem; }

::-webkit-scrollbar { width: 5px; height: 5px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--border); border-radius: 10px; }
::-webkit-scrollbar-thumb:hover { background: var(--text-muted); }

/* ═══════════════════════════════════════════════
   SIDEBAR
═══════════════════════════════════════════════ */
.seo-sidebar {
  position: fixed;
  top: 0; left: 0; bottom: 0;
  width: var(--nav-w);
  background: var(--bg-sidebar);
  border-right: 1px solid var(--border);
  display: flex;
  flex-direction: column;
  z-index: 1030;
  transition: width .3s ease, background .25s;
  overflow: hidden;
}

/* Brand */
.seo-brand {
  display: flex;
  align-items: center;
  height: var(--header-h);
  padding: 0 1.5rem;
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
}
.seo-brand-text {
  font-size: 1.1rem;
  font-weight: 800;
  color: var(--text-main);
  letter-spacing: -0.4px;
  white-space: nowrap;
  display: flex;
  align-items: baseline;
  gap: .05em;
}
.seo-brand-text .brand-top { color: var(--text-main); }
.seo-brand-text .brand-bot { color: var(--primary); }

/* Nav */
.seo-nav { flex: 1; overflow-y: auto; padding: .5rem 0; }
.seo-nav-label {
  padding: .9rem 1.5rem .4rem;
  font-size: .68rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: .07em;
  color: var(--text-nav-label);
  white-space: nowrap;
}
.seo-nav-item {
  display: flex;
  align-items: center;
  gap: .75rem;
  padding: .55rem 1rem;
  margin: .15rem .75rem;
  border-radius: 6px;
  font-size: .84rem;
  font-weight: 500;
  color: var(--text-nav);
  cursor: pointer;
  transition: background .15s, color .15s;
  white-space: nowrap;
  text-decoration: none;
}
.seo-nav-item svg { flex-shrink: 0; stroke: currentColor; }
.seo-nav-item:hover { background: var(--primary-light); color: var(--primary); }
.seo-nav-item.active { background: var(--primary-light); color: var(--primary); font-weight: 600; }

/* ═══════════════════════════════════════════════
   HEADER
═══════════════════════════════════════════════ */
.seo-header {
  position: fixed;
  top: 0;
  left: var(--nav-w);
  right: 0;
  height: var(--header-h);
  background: var(--bg-header);
  border-bottom: 1px solid var(--border);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 1.5rem;
  z-index: 1025;
  transition: left .3s ease, background .25s;
  box-shadow: var(--shadow-header);
}

/* Left: toggle + modules dropdown */
.seo-header-left { display: flex; align-items: center; gap: .75rem; }

/* Toggle button */
.seo-toggle {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 36px; height: 36px;
  border-radius: 8px;
  border: none;
  background: transparent;
  color: var(--text-main);
  cursor: pointer;
  transition: background .15s;
}
.seo-toggle:hover { background: var(--border-light); }
.seo-toggle svg { stroke: currentColor; }

/* Modules dropdown button */
.seo-modules-btn {
  display: flex;
  align-items: center;
  gap: .4rem;
  padding: .35rem .85rem;
  border: 1px solid var(--border);
  border-radius: 6px;
  background: transparent;
  font-size: .8rem;
  font-weight: 600;
  color: var(--text-main);
  cursor: pointer;
  transition: background .15s, border-color .15s;
  white-space: nowrap;
}
.seo-modules-btn:hover { background: var(--border-light); border-color: var(--text-muted); }
.seo-modules-btn svg { stroke: currentColor; }

/* Modules dropdown panel */
.seo-modules-dropdown {
  position: absolute;
  top: calc(100% + 6px);
  left: 0;
  min-width: 240px;
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 8px;
  box-shadow: 0 8px 24px rgb(0 0 0/.12);
  padding: .5rem 0;
  z-index: 2000;
  display: none;
}
.seo-modules-dropdown.show { display: block; }
.seo-modules-dropdown a {
  display: flex;
  align-items: center;
  gap: .6rem;
  padding: .55rem 1rem;
  font-size: .83rem;
  font-weight: 500;
  color: var(--text-nav);
  transition: background .12s, color .12s;
}
.seo-modules-dropdown a:hover { background: var(--primary-light); color: var(--primary); }
.seo-modules-dropdown a svg { flex-shrink: 0; stroke: currentColor; }

/* Right: action icons */
.seo-header-right { display: flex; align-items: center; gap: .25rem; }

.seo-action {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 36px; height: 36px;
  border-radius: 8px;
  border: none;
  background: transparent;
  color: var(--text-muted);
  cursor: pointer;
  transition: background .15s, color .15s;
}
.seo-action:hover { background: var(--border-light); color: var(--text-main); }
.seo-action svg { stroke: currentColor; }

/* Badge on bell / clock */
.seo-badge {
  position: absolute;
  top: 3px; right: 3px;
  min-width: 16px; height: 16px;
  padding: 0 4px;
  border-radius: 10px;
  font-size: .6rem;
  font-weight: 700;
  line-height: 16px;
  text-align: center;
  background: #ea4d4d;
  color: #fff;
  pointer-events: none;
}

/* Clock text */
.seo-clock {
  font-size: .78rem;
  font-weight: 600;
  color: var(--text-muted);
  min-width: 60px;
  text-align: center;
  letter-spacing: .3px;
}

/* Separator */
.seo-sep {
  width: 1px;
  height: 24px;
  background: var(--border);
  margin: 0 .25rem;
}

/* User chip */
.seo-user {
  position: relative;
  display: flex;
  align-items: center;
  gap: .5rem;
  padding: .25rem .5rem;
  border-radius: 8px;
  cursor: pointer;
  transition: background .15s;
}
.seo-user:hover { background: var(--border-light); }
.seo-avatar {
  width: 32px; height: 32px;
  border-radius: 50%;
  background: var(--primary);
  color: #fff;
  font-size: .72rem;
  font-weight: 700;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  overflow: hidden;
}
.seo-avatar img { width: 100%; height: 100%; object-fit: cover; }
.seo-user-meta { line-height: 1.3; }
.seo-user-name { font-size: .78rem; font-weight: 600; color: var(--text-main); }
.seo-user-role { font-size: .68rem; color: var(--text-muted); }

/* User dropdown */
.seo-user-dropdown {
  position: absolute;
  top: calc(100% + 8px);
  right: 0;
  min-width: 220px;
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 8px;
  box-shadow: 0 8px 24px rgb(0 0 0/.12);
  padding: .5rem 0;
  z-index: 2000;
  display: none;
}
.seo-user-dropdown.show { display: block; }
.seo-user-dropdown-header {
  padding: .75rem 1rem 1rem;
  border-bottom: 1px solid var(--border);
  margin-bottom: .5rem;
}
.seo-user-dropdown-header .seo-avatar { width: 40px; height: 40px; font-size: .9rem; margin-bottom: .5rem; }
.seo-user-dropdown-header .name { font-size: .84rem; font-weight: 600; color: var(--text-main); }
.seo-user-dropdown-header .email { font-size: .72rem; color: var(--text-muted); }
.seo-user-dropdown a {
  display: flex;
  align-items: center;
  gap: .6rem;
  padding: .5rem 1rem;
  font-size: .82rem;
  font-weight: 500;
  color: var(--text-nav);
  transition: background .12s, color .12s;
}
.seo-user-dropdown a:hover { background: var(--primary-light); color: var(--primary); }
.seo-user-dropdown a svg { flex-shrink: 0; stroke: currentColor; }
.seo-user-dropdown .divider { height: 1px; background: var(--border); margin: .4rem 0; }
.seo-user-dropdown a.danger:hover { background: rgba(234,77,77,.08); color: #ea4d4d; }

/* ═══════════════════════════════════════════════
   MAIN CONTENT AREA
═══════════════════════════════════════════════ */
.seo-main {
  margin-left: var(--nav-w);
  padding-top: var(--header-h);
  min-height: 100vh;
  transition: margin-left .3s ease;
}
.seo-page-header {
  position: sticky;
  top: var(--header-h);
  z-index: 1020;
  background: var(--bg-card);
  border-bottom: 1px solid var(--border);
  padding: 0 1.75rem;
  min-height: 52px;
  display: flex;
  align-items: center;
  gap: 1rem;
  box-shadow: var(--shadow-card);
}
.seo-page-header h5 {
  margin: 0;
  font-size: .93rem;
  font-weight: 700;
  padding-right: 1rem;
  border-right: 1px solid var(--border);
  color: var(--text-main);
}
.seo-breadcrumb {
  display: flex;
  align-items: center;
  gap: .4rem;
  list-style: none;
  margin: 0; padding: 0;
  font-size: .78rem;
  color: var(--text-muted);
}
.seo-breadcrumb a { color: var(--text-main); font-weight: 500; }
.seo-breadcrumb a:hover { color: var(--primary); }
.seo-breadcrumb .sep { color: var(--border); font-size: .8rem; }

.seo-content { padding: 1.75rem; }

/* ═══════════════════════════════════════════════
   CARDS
═══════════════════════════════════════════════ */
.seo-card {
  background: var(--bg-card);
  border-radius: 10px;
  border: 1px solid var(--border-light);
  box-shadow: var(--shadow-card);
  padding: 1.25rem 1.5rem;
  margin-bottom: 1.5rem;
  transition: background .25s, border-color .25s;
}

/* ═══════════════════════════════════════════════
   MINIMENU (sidebar collapsed)
═══════════════════════════════════════════════ */
body.minimenu .seo-sidebar { width: var(--nav-mini-w); }
body.minimenu .seo-nav-label,
body.minimenu .seo-nav-item span { display: none; }
body.minimenu .seo-nav-item { justify-content: center; padding: .6rem; margin: .15rem .5rem; }
/* Brand apilado: "Suite" arriba, "SEO" abajo */
body.minimenu .seo-brand { justify-content: center; padding: 0; }
body.minimenu .seo-brand-text {
  display: flex;
  flex-direction: column;
  align-items: center;
  line-height: 1.1;
  font-size: .75rem;
}
body.minimenu .seo-brand-text .brand-top  { color: var(--text-main); }
body.minimenu .seo-brand-text .brand-bot  { color: var(--primary); }
body.minimenu .seo-header { left: var(--nav-mini-w); }
body.minimenu .seo-main { margin-left: var(--nav-mini-w); }
/* minimenu: dropdown ya posicionado relativo al botón, no necesita ajuste */

/* ═══════════════════════════════════════════════
   AUTH — LOGIN
═══════════════════════════════════════════════ */
.seo-auth-wrap {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #f0f2f8;
  padding: 1.5rem;
}
.seo-login-card {
  width: 100%;
  max-width: 420px;
  background: #fff;
  border-radius: 12px;
  padding: 2.5rem 2.25rem;
  box-shadow: 0 20px 60px rgb(0 0 0/.12);
}
.seo-login-brand {
  font-size: 1.4rem;
  font-weight: 800;
  color: #283c50;
  letter-spacing: -.4px;
  margin-bottom: .25rem;
}
.seo-login-brand span { color: #0f5274; }
.seo-login-sub { font-size: .8rem; color: #64748b; margin-bottom: 2rem; }

.seo-form-label {
  display: block;
  font-size: .72rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: .5px;
  color: #4b5563;
  margin-bottom: .4rem;
}
.seo-form-control {
  width: 100%;
  padding: .62rem .85rem;
  font-size: .85rem;
  color: #283c50;
  background: #fff;
  border: 1px solid #dcdee4;
  border-radius: 7px;
  outline: none;
  transition: border-color .15s, box-shadow .15s;
  font-family: inherit;
}
.seo-form-control:focus {
  border-color: #0f5274;
  box-shadow: 0 0 0 3px rgba(15, 82, 116, .12);
}
.seo-form-control::placeholder { color: #9ca3af; }

.seo-btn-login {
  width: 100%;
  padding: .7rem;
  font-size: .875rem;
  font-weight: 700;
  color: #fff;
  background: #0f5274;
  border: none;
  border-radius: 7px;
  cursor: pointer;
  transition: background .15s;
  font-family: inherit;
  letter-spacing: .2px;
}
.seo-btn-login:hover:not(:disabled) { background: #0c3f59; }
.seo-btn-login:disabled { background: #94a3b8; cursor: not-allowed; }

.seo-alert-error {
  padding: .65rem .85rem;
  border-radius: 7px;
  font-size: .8rem;
  background: rgba(234, 77, 77, .08);
  color: #c0392b;
  border: 1px solid rgba(234, 77, 77, .2);
  margin-bottom: 1.25rem;
  display: none;
}
.seo-alert-error.show { display: block; }

/* ═══════════════════════════════════════════════
   UTILITIES
═══════════════════════════════════════════════ */
.text-muted    { color: var(--text-muted) !important; }
.text-primary  { color: var(--primary) !important; }
.text-success  { color: #25b865 !important; }
.text-danger   { color: #ea4d4d !important; }
.bg-primary    { background: var(--primary) !important; }
.bg-soft-success { background: rgba(37,184,101,.10) !important; }

.fs-11 { font-size: 11px !important; }
.fs-12 { font-size: 12px !important; }
.fs-13 { font-size: 13px !important; }
.fs-14 { font-size: 14px !important; }

/* ═══════════════════════════════════════════════
   TABLA
═══════════════════════════════════════════════ */
.seo-table-wrap {
  overflow-x: auto;
  border-radius: 10px;
  border: 1px solid var(--border-light);
}
.seo-table {
  width: 100%;
  border-collapse: collapse;
  font-size: .83rem;
}
.seo-table thead th {
  padding: .7rem 1rem;
  font-size: .7rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: .05em;
  color: var(--text-muted);
  background: var(--bg-body);
  border-bottom: 1px solid var(--border);
  white-space: nowrap;
  text-align: left;
}
.seo-table tbody tr {
  border-bottom: 1px solid var(--border-light);
  transition: background .12s;
}
.seo-table tbody tr:last-child { border-bottom: none; }
.seo-table tbody tr:hover { background: var(--primary-light); }
.seo-table tbody td {
  padding: .7rem 1rem;
  color: var(--text-main);
  vertical-align: middle;
}

/* ═══════════════════════════════════════════════
   BADGES
═══════════════════════════════════════════════ */
.seo-pill {
  display: inline-flex;
  align-items: center;
  gap: .3rem;
  padding: .2rem .6rem;
  border-radius: 20px;
  font-size: .7rem;
  font-weight: 700;
  letter-spacing: .02em;
  white-space: nowrap;
}
.seo-pill-success { background: rgba(37,184,101,.12); color: #1a9c5a; }
.seo-pill-danger  { background: rgba(234,77,77,.12);  color: #c0392b; }
.seo-pill-info    { background: rgba(15,82,116,.12);  color: #0f5274; }
.seo-pill-muted   { background: var(--border-light);  color: var(--text-muted); }

html[data-theme="dark"] .seo-pill-info { color: #7cc8ef; background: rgba(124,200,239,.12); }

/* ═══════════════════════════════════════════════
   BOTONES
═══════════════════════════════════════════════ */
.seo-btn {
  display: inline-flex;
  align-items: center;
  gap: .4rem;
  padding: .45rem .95rem;
  font-size: .82rem;
  font-weight: 600;
  border-radius: 7px;
  border: none;
  cursor: pointer;
  transition: background .15s, opacity .15s;
  font-family: inherit;
  white-space: nowrap;
}
.seo-btn:disabled { opacity: .55; cursor: not-allowed; }
.seo-btn svg { stroke: currentColor; flex-shrink: 0; }

.seo-btn-primary { background: #0f5274; color: #fff; }
.seo-btn-primary:hover:not(:disabled) { background: #0c3f59; }

.seo-btn-outline {
  background: transparent;
  color: var(--text-main);
  border: 1px solid var(--border);
}
.seo-btn-outline:hover:not(:disabled) { background: var(--border-light); }

.seo-btn-danger { background: #ea4d4d; color: #fff; }
.seo-btn-danger:hover:not(:disabled) { background: #c0392b; }

.seo-btn-icon {
  width: 30px; height: 30px;
  padding: 0;
  justify-content: center;
  border-radius: 6px;
  background: transparent;
  border: 1px solid var(--border);
  color: var(--text-muted);
}
.seo-btn-icon:hover:not(:disabled) { background: var(--primary-light); color: var(--primary); border-color: transparent; }
.seo-btn-icon.danger:hover:not(:disabled) { background: rgba(234,77,77,.10); color: #ea4d4d; border-color: transparent; }

/* ═══════════════════════════════════════════════
   FORMULARIOS (panel / modal)
═══════════════════════════════════════════════ */
.seo-label {
  display: block;
  font-size: .72rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: .04em;
  color: var(--text-muted);
  margin-bottom: .35rem;
}
.seo-input, .seo-select {
  width: 100%;
  padding: .55rem .8rem;
  font-size: .84rem;
  color: var(--text-main);
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 7px;
  outline: none;
  transition: border-color .15s, box-shadow .15s;
  font-family: inherit;
}
.seo-input:focus, .seo-select:focus {
  border-color: #0f5274;
  box-shadow: 0 0 0 3px rgba(15,82,116,.12);
}
.seo-input::placeholder { color: var(--text-muted); opacity: .6; }
.seo-select { appearance: none; cursor: pointer; }

.seo-field { margin-bottom: 1.1rem; }
.seo-field:last-child { margin-bottom: 0; }

/* Toggle switch */
.seo-switch {
  display: inline-flex;
  align-items: center;
  gap: .5rem;
  cursor: pointer;
  font-size: .84rem;
  color: var(--text-main);
  user-select: none;
}
.seo-switch input { display: none; }
.seo-switch-track {
  width: 36px; height: 20px;
  background: var(--border);
  border-radius: 20px;
  position: relative;
  transition: background .2s;
  flex-shrink: 0;
}
.seo-switch-track::after {
  content: '';
  position: absolute;
  top: 3px; left: 3px;
  width: 14px; height: 14px;
  border-radius: 50%;
  background: #fff;
  transition: left .2s;
}
.seo-switch input:checked ~ .seo-switch-track { background: #25b865; }
.seo-switch input:checked ~ .seo-switch-track::after { left: 19px; }

/* ═══════════════════════════════════════════════
   MODAL
═══════════════════════════════════════════════ */
.seo-modal-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.45);
  z-index: 3000;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 1rem;
  opacity: 0;
  pointer-events: none;
  transition: opacity .2s;
}
.seo-modal-backdrop.show {
  opacity: 1;
  pointer-events: auto;
}
.seo-modal {
  background: var(--bg-card);
  border-radius: 12px;
  border: 1px solid var(--border);
  box-shadow: 0 24px 60px rgb(0 0 0/.25);
  width: 100%;
  max-width: 480px;
  max-height: 90vh;
  overflow-y: auto;
  transform: translateY(12px);
  transition: transform .2s;
}
.seo-modal-backdrop.show .seo-modal { transform: translateY(0); }

.seo-modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1.1rem 1.5rem;
  border-bottom: 1px solid var(--border);
}
.seo-modal-header h6 {
  margin: 0;
  font-size: .93rem;
  font-weight: 700;
  color: var(--text-main);
}
.seo-modal-close {
  width: 28px; height: 28px;
  border-radius: 6px;
  border: none;
  background: transparent;
  color: var(--text-muted);
  cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  transition: background .12s, color .12s;
}
.seo-modal-close:hover { background: var(--border-light); color: var(--text-main); }
.seo-modal-close svg { stroke: currentColor; }

.seo-modal-body { padding: 1.5rem; }

.seo-modal-footer {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: .6rem;
  padding: 1rem 1.5rem;
  border-top: 1px solid var(--border);
}

/* ═══════════════════════════════════════════════
   TOOLBAR / PAGE ACTIONS
═══════════════════════════════════════════════ */
.seo-toolbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 1.25rem;
  gap: 1rem;
  flex-wrap: wrap;
}
.seo-toolbar-left, .seo-toolbar-right {
  display: flex;
  align-items: center;
  gap: .6rem;
  flex-wrap: wrap;
}
.seo-search-box {
  display: flex;
  align-items: center;
  gap: .5rem;
  padding: .42rem .8rem;
  border: 1px solid var(--border);
  border-radius: 7px;
  background: var(--bg-card);
  color: var(--text-muted);
  transition: border-color .15s;
}
.seo-search-box:focus-within { border-color: #0f5274; }
.seo-search-box input {
  border: none;
  outline: none;
  background: transparent;
  font-size: .83rem;
  color: var(--text-main);
  font-family: inherit;
  width: 180px;
}
.seo-search-box input::placeholder { color: var(--text-muted); opacity: .6; }
.seo-search-box svg { stroke: currentColor; flex-shrink: 0; }


/* ══════════════════════════════════════
   TEMAS DEL DÍA — layout
══════════════════════════════════════ */

body.topics-page .seo-main {
  padding: 0;
  padding-top: var(--header-h);
  height: 100vh;
  min-height: unset;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

/* Page-level header bar */
.topics-page-header {
  display: flex;
  align-items: center;
  gap: .75rem;
  padding: .7rem 1.25rem;
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
  background: var(--bg-card);
}
.topics-page-header h5 {
  font-size: .95rem;
  font-weight: 700;
  margin: 0;
  color: var(--text-main);
  display: flex;
  align-items: center;
  gap: .4rem;
}
.topics-date {
  font-size: .75rem;
  color: var(--text-muted);
  margin-left: .25rem;
}

/* 3-column grid */
.topics-grid {
  display: flex;
  flex: 1;
  overflow: hidden;
}

/* ── LEFT: Sources ── */
.topics-sources {
  width: 265px;
  flex-shrink: 0;
  border-right: 1px solid var(--border);
  background: var(--bg-card);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}
.sources-panel-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: .65rem 1rem;
  border-bottom: 1px solid var(--border);
  font-size: .78rem;
  font-weight: 700;
  color: var(--text-main);
  flex-shrink: 0;
}
.panel-header-spacer {
  padding: .4rem 1rem;
  border-bottom: 1px solid var(--border-light);
  flex-shrink: 0;
}
.sources-list {
  flex: 1;
  overflow-y: auto;
}
.source-card {
  display: flex;
  align-items: center;
  gap: .7rem;
  padding: .65rem 1rem;
  cursor: pointer;
  border-bottom: 1px solid var(--border-light);
  transition: background .12s;
}
.source-card:hover { background: var(--primary-light); }
.source-card.active { background: var(--primary); }
.source-card.active .source-name,
.source-card.active .source-count { color: #fff !important; }
.source-icon {
  width: 38px;
  height: 38px;
  border-radius: 9px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.1rem;
  flex-shrink: 0;
  background: var(--bg-card);
  border: 1px solid var(--border);
}
.source-card.active .source-icon {
  background: rgba(255,255,255,.18);
  border-color: transparent;
}
.source-info { flex: 1; min-width: 0; }
.source-name {
  font-size: .8rem;
  font-weight: 600;
  color: var(--text-main);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.source-count {
  font-size: .7rem;
  color: var(--text-muted);
  margin-top: .1rem;
}
.source-badge {
  font-size: .65rem;
  font-weight: 700;
  background: var(--primary-light);
  color: var(--primary);
  border-radius: 20px;
  padding: .1rem .45rem;
  flex-shrink: 0;
}
.source-card.active .source-badge {
  background: rgba(255,255,255,.2);
  color: #fff;
}
.sources-stats {
  border-top: 1px solid var(--border);
  padding: .75rem 1rem;
  flex-shrink: 0;
}
.sources-stats h6 {
  font-size: .65rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: .07em;
  color: var(--text-muted);
  margin: 0 0 .5rem;
}
.stat-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: .2rem 0;
  font-size: .78rem;
}
.stat-row span:first-child { color: var(--text-nav); }
.stat-val { font-weight: 700; color: var(--primary); }

/* ── CENTER: Feed ── */
.topics-feed {
  flex: 1;
  background: var(--bg-card);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  min-width: 0;
}
.feed-toolbar {
  display: flex;
  align-items: center;
  gap: .6rem;
  padding: .6rem 1rem;
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
  flex-wrap: wrap;
}
.feed-toolbar h5 {
  font-size: .88rem;
  font-weight: 700;
  margin: 0;
  display: flex;
  align-items: center;
  gap: .35rem;
  color: var(--text-main);
}
.feed-select {
  padding: .32rem .65rem;
  border: 1px solid var(--border);
  border-radius: 6px;
  background: var(--bg-card);
  color: var(--text-main);
  font-size: .75rem;
  font-family: inherit;
  cursor: pointer;
  outline: none;
}
.feed-select:focus { border-color: var(--primary); }
.feed-legend {
  display: flex;
  align-items: center;
  gap: 1.25rem;
  padding: .4rem 1rem;
  border-bottom: 1px solid var(--border-light);
  flex-shrink: 0;
  font-size: .7rem;
  color: var(--text-muted);
  flex-wrap: wrap;
}
.legend-item { display: flex; align-items: center; gap: .3rem; }
.legend-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
}
.feed-items {
  flex: 1;
  overflow-y: auto;
  padding: .6rem .9rem;
}
/* topic card */
.topic-card {
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: .7rem 1rem;
  margin-bottom: .55rem;
  background: var(--bg-card);
  transition: box-shadow .12s;
}
.topic-card:hover { box-shadow: 0 2px 8px rgb(0 0 0/.07); }
.topic-card-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: .5rem;
  margin-bottom: .3rem;
}
.topic-card-title {
  font-size: .85rem;
  font-weight: 600;
  color: var(--primary);
  flex: 1;
  cursor: pointer;
}
.topic-card-title:hover { text-decoration: underline; }
.topic-card-url {
  font-size: .68rem;
  color: var(--text-muted);
  display: flex;
  align-items: center;
  gap: .3rem;
  margin-bottom: .5rem;
  word-break: break-all;
  line-height: 1.3;
}
.topic-card-actions { display: flex; gap: .45rem; }
.topic-badges { display: flex; gap: .35rem; align-items: center; flex-shrink: 0; }
.badge-nuevo {
  font-size: .62rem;
  font-weight: 700;
  background: #d1fae5;
  color: #065f46;
  border-radius: 20px;
  padding: .1rem .5rem;
  display: flex;
  align-items: center;
  gap: .25rem;
}
html[data-theme="dark"] .badge-nuevo { background: #064e3b; color: #6ee7b7; }
.badge-source {
  font-size: .62rem;
  font-weight: 600;
  background: var(--border-light);
  color: var(--text-muted);
  border-radius: 20px;
  padding: .1rem .5rem;
}
.badge-time {
  font-size: .62rem;
  font-weight: 700;
  background: var(--border-light);
  border-radius: 20px;
  padding: .1rem .45rem;
  /* color is set inline dynamically */
}

/* ── RIGHT: Added topics ── */
.topics-added {
  width: 300px;
  flex-shrink: 0;
  border-left: 1px solid var(--border);
  background: var(--bg-card);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}
.added-panel-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: .65rem 1rem;
  border-bottom: 1px solid var(--border);
  font-size: .78rem;
  font-weight: 700;
  color: var(--text-main);
  flex-shrink: 0;
}
.added-count-badge {
  font-size: .65rem;
  background: var(--primary);
  color: #fff;
  border-radius: 20px;
  padding: .1rem .45rem;
  font-weight: 700;
}
.added-list { flex: 1; overflow-y: auto; }
.added-group-label {
  font-size: .63rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: .07em;
  color: var(--text-muted);
  padding: .5rem 1rem .2rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.added-item {
  display: flex;
  align-items: flex-start;
  gap: .4rem;
  padding: .45rem 1rem;
  border-bottom: 1px solid var(--border-light);
}
.added-item-title {
  flex: 1;
  font-size: .76rem;
  color: var(--text-main);
  font-weight: 500;
  line-height: 1.3;
}
.added-item-actions { display: flex; gap: .2rem; flex-shrink: 0; }
.added-actions {
  border-top: 1px solid var(--border);
  padding: .75rem 1rem;
  display: flex;
  flex-direction: column;
  gap: .45rem;
  flex-shrink: 0;
}
.btn-dashed {
  border: 2px dashed var(--border);
  border-radius: 8px;
  padding: .5rem;
  background: transparent;
  color: var(--text-muted);
  font-size: .78rem;
  font-family: inherit;
  cursor: pointer;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: .4rem;
  transition: border-color .15s, color .15s;
}
.btn-dashed:hover { border-color: var(--primary); color: var(--primary); }

/* Topic modal specifics */
.original-news-card {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: .65rem .9rem;
  margin-bottom: .1rem;
}
.original-news-title {
  font-size: .82rem;
  font-weight: 600;
  color: var(--text-main);
  margin-bottom: .3rem;
}
.original-news-meta {
  display: flex;
  align-items: center;
  gap: .6rem;
  font-size: .7rem;
  color: var(--text-muted);
}
.char-counter {
  font-size: .68rem;
  color: var(--text-muted);
  text-align: right;
  margin-top: .2rem;
}
.char-counter.warn { color: #f59e0b; }
.char-counter.error { color: #ef4444; }

/* Category manager inline */
.cat-manager-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: .35rem .5rem;
  border-radius: 6px;
  font-size: .8rem;
  color: var(--text-main);
}
.cat-manager-row:hover { background: var(--primary-light); }
